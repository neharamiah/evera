<!DOCTYPE html>
<html lang="en">

<head>
    <title>dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-[url('/static/bg2.png')] bg-cover bg-center min-h-screen text-white flex flex-col items-center justify-center px-6 py-12">

    <!-- Welcome Section -->
    <div class="text-center mb-12">
        <h1 class="text-5xl font-extrabold tracking-wide">Welcome, {{ user.name }}! </h1>
        <p class="text-lg text-gray-400 mt-3 max-w-xl">
            Take control of your carbon footprint. Track, offset, and make an impact.
        </p>
    </div>

    <!-- Top-right Logout Button -->
    <a href="/logout" class="absolute top-6 right-6 py-3 px-6">
        Logout
    </a>
    
    

    <!-- Dashboard Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-4xl">
        <a href="/emissions" class="dashboard-card">Track Emissions</a>
        <a href="/greenscore" class="dashboard-card">Green Score</a>
        <a href="/offset-emissions" class="dashboard-card">Offset Emissions</a>
        <a href="/certifications" class="dashboard-card">Certifications</a>
        <a href="/badges" class="dashboard-card">Badges</a>

        <!-- Download Monthly Report Button -->
        <button onclick="openModal()" class="dashboard-card bg-green-600 hover:bg-green-500">
            Download Monthly Report
        </button>
    </div>

    <!-- Modal for Report Download -->
    <div id="reportModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
            <h2 class="text-xl font-bold mb-4 text-center">Select Month and Year</h2>
            <form action="{{ url_for('download_report') }}" method="post">
                <div class="mb-4">
                    <label for="modal-month" class="block text-sm font-medium text-gray-700 mb-1">Month:</label>
                    <select name="month" id="modal-month" class="w-full p-2 border border-gray-300 rounded text-black">
                        {% for m in range(1, 13) %}
                        <option value="{{ m }}" {% if m == current_month %}selected{% endif %}>{{ m }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-4">
                    <label for="modal-year" class="block text-sm font-medium text-gray-700 mb-1">Year:</label>
                    <select name="year" id="modal-year" class="w-full p-2 border border-gray-300 rounded text-black">
                        {% for y in range(current_year, current_year-5, -1) %}
                        <option value="{{ y }}" {% if y == current_year %}selected{% endif %}>{{ y }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="flex justify-end space-x-2">
                    <button type="button" onclick="closeModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Download</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function openModal() {
            document.getElementById('reportModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('reportModal').classList.add('hidden');
        }

        // Close modal when clicking outside
        document.getElementById('reportModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeModal();
            }
        });
    </script>

    <style>
        .dashboard-card {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease-in-out;
            text-align: center;
        }

        .dashboard-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
    </style>

</body>

</html>
